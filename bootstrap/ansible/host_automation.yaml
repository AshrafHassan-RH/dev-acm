---
- name: Playbook to run commands on the bastion host
  hosts: all
  tasks:
    - name: Run expect to wait for a successful PXE boot via out-of-band CIMC
      ansible.builtin.shell: |
        login_hub
        oc get node 
        exit 0
      args:
        executable: /bin/bash
      register: stdout

    #- set_fact:
    #    myvalue: "{{ results.stdout }}"
    #  vars:
    #    regexp: 'value=\"([^"]+)'
    - debug:
        var: stdout
