---
- name: Playbook to run commands on the bastion host
  hosts: all
  tasks:
    - name: Run expect to wait for a successful PXE boot via out-of-band CIMC
      ansible.builtin.shell: |
        login_hub
        oc get node 
        exit 0
      args:
        executable: /bin/bash
      register: output

    - debug:
        var: output
    - set_fact:
        myvalue: "{{ output.stdout }}"
    #  vars:
    #    regexp: 'value=\"([^"]+)'
    - debug: 
        var: myvalue
