---
- name: Playbook to integrate compliance and RHACS
  hosts: localhost
  connection: local  
  tasks:
    - name: patch remove existing nodeselector
      kubernetes.core.k8s:
        state: patched
        definition:
          apiVersion: compliance.openshift.io/v1alpha1
          kind: ScanSetting
          metadata:
            name: default
            namespace: openshift-compliance
          rawResultStorage:
            nodeSelector: null
         
    - name: patch add worker  nodeselector
      kubernetes.core.k8s:
        state: patched
        definition:
          apiVersion: compliance.openshift.io/v1alpha1
          kind: ScanSetting
          metadata:
            name: default
            namespace: openshift-compliance
          rawResultStorage:
            nodeSelector: 
              node-role.kubernetes.io/worker: ""
     
   
